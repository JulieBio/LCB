<!doctype html>
<html lang="fr">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.3.1/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
    <link rel="stylesheet" type="text/css" href="style.css">
   	<script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <title>Les Cordons Bleus</title>
</head>

<body>

    <!-- Navbar Top -->
    <nav class="navbar navbartop navbar-expand-sm navbar-light bg-light">
        <a href="index.html" class="navbar-brand">
            <img src="./images/chef.png" height="30" alt="Les Cordons Bleus">Les Cordons Bleus
        </a>
        <button type="button" class="navbar-toggler" data-toggle="collapse" data-target="#navbarCollapse">
            <span class="navbar-toggler-icon"></span>
        </button>    
        <div class="collapse navbar-collapse" id="navbarCollapse">
            <div class="navbar-nav ml-auto">
                <a href="connexion.html" class="nav-item nav-link" title="Connexion"><img src="./images/nav_user.png" height="35" alt="login"></a>
            </div>
        </div>
    </nav>

    <!-- Liste mes recettes -->
<div class="maCreationR">

    <!-- card -->
    <div class="card shadow p-3 mb-5 bg-white rounded">
        <div class="card-body cardR">
        	<form>
            <h1 class="text-center titreCardRecette">Ajouter une recette</h1>
            <p class="card-text titreinfo1R">Selectionnez vos ingrédients et la quantité :</p>
    
                <div class="row">
                
                	<!-- liste groupe ingrédient -->
                    <div class="form-col-4">
                        <div class="col-auto my-4 form1" >
                            <select class="custom-select mr-sm-2 select1" id="cat1"> 
                            	<option selected>Faites votre choix...</option>           
                            </select>
                        </div>
                    </div>
					
					<!-- liste sous groupe ingrédient -->
                    <div class="form-col-4">
                        <div class="col-auto my-4">
                            <select class="custom-select mr-sm-2 select2" id="cat2">
                            	<option selected>Faites votre choix...</option> 
                            </select>
                        </div>
                    </div>

					<!-- liste sous sous groupe ingrédient -->
                    <div class="form-col-4">
                        <div class="col-auto my-4">
                            <select class="custom-select mr-sm-2 select3" id="cat3">
                            	<option selected>Faites votre choix...</option> 
                            </select>
                        </div>
                    </div>
                    
                    <!-- liste ingrédient -->
                    <div class="form-col-4">
                        <div class="col-auto my-4">
                            <select class="custom-select mr-sm-2 select4" id="cat4">
                            	<option selected>Faites votre choix...</option> 
                            </select>
                        </div>
                    </div>
                    
                </div>

<!--   --------------------------------- EN TRAVAUX !!!---------------------------------------------------------- -->
                <!-- Poids -->
                <div class="row">
                    <div class="col-4 poidsR">
                        <div class="input-group">
                            <input type="text" class="form-control poidsAlim" id="poidsAlim" aria-label="Text input with segmented dropdown button" placeholder="quantité">
                            <select class="form-control">
                                    <option selected>Unités...</option>
                                    <option value="1">Grammes</option>
                                    <option value="2">Litres</option>
                            </select>
                        </div>
                    </div>
                </div>
                
                <!-- Validation -->
                <div class="row">
                    <div class="col text-right">
                        <button type="submit" class="btn btn-success validIngredient">Valider</button>
                    </div>
                </div>

                <div class="row recetteIngredientsGeneree">
                </div>

<!--   --------------------------------- FIN TRAVAUX ---------------------------------------------------------- -->

                <div class="recettePreparation">
                    <div class="form-group">
                        <label for="exampleFormControlTextarea1">Préparation :</label>
                        <textarea class="form-control" id="exampleFormControlTextarea1" rows="5"></textarea>
                    </div>
                </div>

                <!-- Validation -->
                <div class="row">
                    <div class="col validAjouR text-right">
                        <button type="submit" class="btn btn-success">Valider</button>
                    </div>
                </div>

            </form>
        </div>
    </div>
</div>
    


    <!-- Footer en mode Desktop-->
    <div class="footerDesktop">
        <div class="footertext1">made with ♥ by LCB
        </div>
        <div class="footertext-links">
            <p>Tous droits réservés Les Cordons Bleus - 2019</br>
                Vous avez une question ? <a href="">nous contacter</a> ∗ 
                <a href="">Mentions légales</a> ∗ 
                <a href="">Conditions Générales d'Utilisation</a> ∗ 
                <a href="">Contact</a> ∗ 
                <a href="">Politique de protection des données personnelles</a> ∗ 
                <a href="">Politique de confidentialité</a> 
            </p>
        </div>
    </div>
    

    <!-- Navbar bottom format mobile xs -->
    <nav class="navbar navbarbottom fixed-bottom navbar-light bg-light">
        <a href="index.html" class="nav-item nav-link"><img src="./images/nav_home.png" height="40" alt="login"></a>
        <a href="#" class="nav-item nav-link"><img src="./images/nav_heart.png" height="40" alt="login"></a>
        <a href="connexion.html" class="nav-item nav-link"><img src="./images/nav_user.png" height="40" alt="login"></a>
        <a href="#" class="nav-item nav-link"><img src="./images/nav_engrenage.png" height="45" alt="login"></a>
    </nav>


	<script>

	    function recupListes(){
	    	var liste;
	    	var numListe;
         	var value1;
         	var value2;
         	var value3;
         	var value4;
         	var ingredientValue;
         // tableaux recupération ingredients
         	var listeIngredients = [];
    		var quantite = [];
    		var compteur = 0;
         	
	        $.ajax({
	            type: 'get',
	            contentType: "application/json",
	            url: "http://localhost:8080/groupe/all/",
	            }).done(function(data) {
	            datas = data;
<<<<<<< HEAD
	
            		
=======
	 			console.log(data);
>>>>>>> 057043a20067814f972edd9ae685008c35d7748a
	            // liste 1 groupe ingrédient 
	            numListe = 1;
	            for (var i = 0; i < datas.length; i++) {
	            	console.log(datas.length);
	                var titre1 = datas[i].lib;
	                $(".select"+numListe).append("<option type=text value="+i+" onclick=selectListe1()>"+titre1+"</option>"); 
	            }
	            
	            // Récupération valeur 1ère liste :
	            $(".select1").on('change', function() {
	            	  value1 = $(this).val();
	            	  $(".select2").empty();
	            	  $(".select3").empty();
	            	  $(".select4").empty();
	            	  
	            	// liste 2 sous groupe ingrédient       	
	  	         	numListe = 2;
	  	         	$(".select"+numListe).append("<option selected>Faites votre choix...</option>");
	  	            for (var j = 0; j < datas[value1].sousGroupeIngredient.length; j++) {
	  	                var titre2 = datas[value1].sousGroupeIngredient[j].lib;
	  	                $(".select"+numListe).append("<option type=text value="+j+" onclick=selectListe2()>"+titre2+"</option>"); 
	  	            }
	  	            
	  	       		// Récupération valeur 2ème liste :
		            $('.select2').on('change', function() {
		            	  value2 = $(this).val();
		            	  $(".select3").empty();
		            	  $(".select4").empty();
	  	            
		  	       		// liste 3 sous sous groupe ingrédient 
			         	numListe = 3;
			         	$(".select"+numListe).append("<option selected>Faites votre choix...</option>");
			            for (var k = 0; k < datas[value1].sousGroupeIngredient[value2].sousSousGroupeIngredient.length; k++) {
			                var titre3 = datas[value1].sousGroupeIngredient[value2].sousSousGroupeIngredient[k].lib;
			                $(".select"+numListe).append("<option type=text value="+k+" onclick=selectListe3()>"+titre3+"</option>"); 
			            }
			         	
			         	// Récupération valeur 3ème liste :
			            $('.select3').on('change', function() {
			            	  value3 = $(this).val();
			            	  $(".select4").empty();
		            	  
			            	// liste 4 ingrédient 
				         	numListe = 4;	
				         	$(".select"+numListe).append("<option selected>Faites votre choix...</option>");
				            for (var l = 0; l < datas[value1].sousGroupeIngredient[value2].sousSousGroupeIngredient[value3].ingredients.length; l++) {
				            	console.log("select4")
				                var titre4 = datas[value1].sousGroupeIngredient[value2].sousSousGroupeIngredient[value3].ingredients[l].alimNom;
				                $(".select"+numListe).append("<option type=text id="+l+" value="+l+" onclick=selectListe3()>"+titre4+"</option>"); 
				            }
					         	
				         	// Récupération valeur 4ème liste :
				            $('.select4').on('change', function() {
				            	value4 = $(this).val();
					            var ingredientValue = datas[value1].sousGroupeIngredient[value2].sousSousGroupeIngredient[value3].ingredients[value4].alimNom;
					            console.log(ingredientValue);
					            

// --------------------------------- EN TRAVAUX !!!----------------------------------------------------------

								console.log("test1");
						
						         // Récupération de la valeur poids ingredient avec validation :
							        $(".validIngredient").click(function() {
							        	// Poids quantité aliment champ poidsRecette
							            //var poids = $(".poidsAlim").val();
				            	  		console.log($(".poidsAlim").val());
				            	  		
							        	//value3 = $(this).val();
							        	console.log(ingredientValue);
							        	console.log(poids);
							        	
							  
							        	
							        	
// --------------------------------- FIN TRAVAUX !!!----------------------------------------------------------		
							        	
							        	/*
							        	// tableaux recupération ingredients
							            $("#validIngredient").click(function(){
				                                compteur++;
				                                listeIngredients[compteur] = $('.select4').val();
				                                quantite[compteur] = $('#poidsRecette').val();
				                                alert(listeIngredients[compteur],quantite[compteur]);
				                         });
						                  */         
							       })
				            })
	            		})
		        	})
	        	})
			})
			
		}


	    recupListes();
	    
	    
	
	</script>
  </body>
</html>

